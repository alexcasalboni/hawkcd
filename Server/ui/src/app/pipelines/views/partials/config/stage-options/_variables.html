<!--Copyright (C) 2016 R&D Solutions Ltd.-->

<!--Licensed under the Apache License, Version 2.0 (the "License");-->
<!--you may not use this file except in compliance with the License.-->
<!--You may obtain a copy of the License at-->

<!--http://www.apache.org/licenses/LICENSE-2.0-->

<!--Unless required by applicable law or agreed to in writing, software-->
<!--distributed under the License is distributed on an "AS IS" BASIS,-->
<!--WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.-->
<!--See the License for the specific language governing permissions and-->
<!--limitations under the License.-->

<div id="stageVars">
    <div class="table-scrollable">
        <table class="table table-bordered table-hover table-fixed">
            <thead>
                <tr>
                    <th class="config-names"> Name <span class="badge badge-default cursor-popover" style="margin-left:5px" onmouseenter="$(this).tooltip('show')" title="{{pipeConfig.popOverOptions.popOverTitles.environmentVariableName}}">?</span></th>
                    <th class="hidden-xs"> Value <span class="badge badge-default cursor-popover" style="margin-left:5px" onmouseenter="$(this).tooltip('show')" title="{{pipeConfig.popOverOptions.popOverTitles.environmentVariableValue}}">?</span></th>
                    <th class="hidden-xs" style="width:100px"> Secured <span class="badge badge-default cursor-popover" style="margin-left:5px" onmouseenter="$(this).tooltip('show')" title="{{pipeConfig.popOverOptions.popOverTitles.environmentVariableSecured}}">?</span></th>
                    <th class="config-controls"> Controls </th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="stageVar in pipeConfig.allPipelines[pipeConfig.pipelineIndex].stageDefinitions[pipeConfig.stageIndex].environmentVariables">
                    <td class="table-element-text"> {{stageVar.key}} </td>
                    <td class="hidden-xs table-element-text"> {{stageVar.isSecured ? '******' : stageVar.value}} </td>
                    <td class="hidden-xs text-center-all"> {{stageVar.isSecured ? 'Yes' : 'No'}} </td>
                    <td class="text-center-all">
                        <button class="btn yellow config-button" ng-disabled="pipeConfig.allPipelines[pipeConfig.pipelineIndex].permissionType != 'ADMIN'" data-target="#editStageVar" data-toggle="modal" ng-click="pipeConfig.environmentVariableUtils.stages.getVariableForEdit(stageVar)">Edit</button>
                        <button class="btn red config-button" ng-disabled="pipeConfig.allPipelines[pipeConfig.pipelineIndex].permissionType != 'ADMIN'" data-target="#removeStageVar" data-toggle="modal" ng-click="pipeConfig.environmentVariableUtils.stages.getVariableForEdit(stageVar)">Delete</button>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <!-- <button class="btn green" ng-disabled="pipeConfig.allPipelines[pipeConfig.pipelineIndex].permissionType != 'ADMIN'" data-target="#addStageVar" data-toggle="modal">Add Environment Variable</button> -->
    <button class="btn green" ng-disabled="pipeConfig.allPipelines[pipeConfig.pipelineIndex].permissionType != 'ADMIN'" data-target="#addStageVar" data-toggle="modal">{{pipeConfig.wizardInfo.labels.newLabel}}</button>
</div>
<div ng-include src="'app/pipelines/views/partials/config/stage-options/_add-variable.html'"></div>
<div ng-include src="'app/pipelines/views/partials/config/stage-options/_edit-variable.html'"></div>
<div ng-include src="'app/pipelines/views/partials/config/stage-options/_remove-variable.html'"></div>
